# ============================================================================
# CATALYTIC COMPUTING SAAS - PRODUCTION ENVIRONMENT CONFIGURATION
# ============================================================================
#
# SECURITY WARNING: Never commit actual production credentials to version control!
# Copy this file to .env.production and fill in real values
#
# Last Updated: 2025-10-05
# ============================================================================

# ============================================================================
# APPLICATION SETTINGS
# ============================================================================
APP_NAME=Catalytic Computing SaaS
APP_ENV=production
DEBUG=false
LOG_LEVEL=WARNING
API_VERSION=v1

# ============================================================================
# SERVER CONFIGURATION
# ============================================================================
# Frontend URL (your actual domain)
FRONTEND_URL=https://app.catalyticcomputing.com

# Backend URL (your API domain)
BACKEND_URL=https://api.catalyticcomputing.com

# Server Port (default: 8000)
PORT=8000

# Workers (recommended: 2x CPU cores + 1)
WORKERS=4

# ============================================================================
# JWT AUTHENTICATION
# ============================================================================
# CRITICAL: Generate production keys using:
# cd /c/Users/Corbin/development/security && python generate_keys.py production

JWT_PRIVATE_KEY_PATH=/path/to/production/keys/jwt_production_private.pem
JWT_PUBLIC_KEY_PATH=/path/to/production/keys/jwt_production_public.pem
JWT_ALGORITHM=RS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=15
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# ============================================================================
# ENCRYPTION KEYS
# ============================================================================
# CRITICAL: Generate production encryption keys separately
API_ENCRYPTION_KEY_PATH=/path/to/production/keys/api_encryption_production.key
DB_ENCRYPTION_KEY_PATH=/path/to/production/keys/db_encryption_production.key

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================
# PostgreSQL (REQUIRED for production)
# Format: postgresql://username:password@host:port/database
DATABASE_URL=postgresql://catalytic_user:CHANGE_THIS_PASSWORD@localhost:5432/catalytic_saas_prod

# Connection Pool Settings
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=10
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600

# ============================================================================
# REDIS CONFIGURATION
# ============================================================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=CHANGE_THIS_REDIS_PASSWORD
REDIS_DB=0
REDIS_MAX_CONNECTIONS=50

# Redis SSL (recommended for production)
REDIS_SSL=true
REDIS_SSL_CERT_REQS=required

# ============================================================================
# SECURITY CONFIGURATION
# ============================================================================
# Security Level: strict (production should always be strict)
SECURITY_LEVEL=strict

# Rate Limiting (aggressive for production)
RATE_LIMIT_ENABLED=true
RATE_LIMIT_PER_MINUTE=30
RATE_LIMIT_BURST=5

# DDoS Protection
DDOS_PROTECTION_ENABLED=true
DDOS_BLOCK_DURATION_MINUTES=120
DDOS_THRESHOLD_REQUESTS=100

# ============================================================================
# CORS CONFIGURATION
# ============================================================================
# CRITICAL: Only allow your actual frontend domain(s)
# NO WILDCARDS! Comma-separated list
CORS_ALLOWED_ORIGINS=https://app.catalyticcomputing.com,https://www.catalyticcomputing.com
CORS_ALLOW_CREDENTIALS=true

# ============================================================================
# SESSION CONFIGURATION
# ============================================================================
# CRITICAL: Generate using: python -c "import secrets; print(secrets.token_hex(32))"
SESSION_SECRET_KEY=CHANGE_THIS_SESSION_SECRET_KEY
SESSION_COOKIE_SECURE=true
SESSION_COOKIE_HTTPONLY=true
SESSION_COOKIE_SAMESITE=strict
SESSION_COOKIE_DOMAIN=.catalyticcomputing.com

# ============================================================================
# CSRF PROTECTION
# ============================================================================
CSRF_ENABLED=true
# CRITICAL: Generate using: python -c "import secrets; print(secrets.token_hex(32))"
CSRF_SECRET_KEY=CHANGE_THIS_CSRF_SECRET_KEY

# ============================================================================
# STRIPE PAYMENT CONFIGURATION
# ============================================================================
# Get from: https://dashboard.stripe.com/apikeys
# CRITICAL: Use LIVE keys for production (sk_live_... and pk_live_...)
STRIPE_SECRET_KEY=sk_live_YOUR_LIVE_SECRET_KEY_HERE
STRIPE_PUBLISHABLE_KEY=pk_live_YOUR_LIVE_PUBLISHABLE_KEY_HERE

# Webhook Secret (from Stripe Dashboard -> Webhooks)
STRIPE_WEBHOOK_SECRET=whsec_YOUR_PRODUCTION_WEBHOOK_SECRET_HERE

# Stripe Configuration
STRIPE_API_VERSION=2023-10-16
STRIPE_MAX_NETWORK_RETRIES=3

# Product IDs (create in Stripe Dashboard)
STRIPE_PRODUCT_STARTER=prod_XXXXXXXXXXXXXX
STRIPE_PRODUCT_PROFESSIONAL=prod_XXXXXXXXXXXXXX
STRIPE_PRODUCT_ENTERPRISE=prod_XXXXXXXXXXXXXX

# ============================================================================
# EMAIL CONFIGURATION
# ============================================================================
# Choose ONE provider (uncomment the section you want to use)

# --- SendGrid (Recommended) ---
SENDGRID_API_KEY=SG.YOUR_PRODUCTION_API_KEY_HERE
EMAIL_FROM=noreply@catalyticcomputing.com
EMAIL_FROM_NAME=Catalytic Computing
SENDGRID_SANDBOX_MODE=false

# --- AWS SES (Alternative) ---
# AWS_ACCESS_KEY_ID=YOUR_PRODUCTION_ACCESS_KEY
# AWS_SECRET_ACCESS_KEY=YOUR_PRODUCTION_SECRET_KEY
# AWS_REGION=us-east-1
# EMAIL_FROM=noreply@catalyticcomputing.com

# --- SMTP (Fallback) ---
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USERNAME=your-production-email@gmail.com
# SMTP_PASSWORD=your-production-app-password
# EMAIL_FROM=noreply@catalyticcomputing.com
# SMTP_USE_TLS=true

# Email Settings
EMAIL_RETRY_ATTEMPTS=3
EMAIL_RETRY_DELAY_SECONDS=5

# ============================================================================
# MONITORING & LOGGING
# ============================================================================
# Sentry Error Tracking (optional but recommended)
# Get DSN from: https://sentry.io/
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
SENTRY_ENVIRONMENT=production
SENTRY_TRACES_SAMPLE_RATE=0.1

# Log Configuration
LOG_FILE=/var/log/catalytic_saas/app.log
LOG_MAX_BYTES=10485760
LOG_BACKUP_COUNT=10
LOG_FORMAT=json

# ============================================================================
# CLOUDFLARE / CDN CONFIGURATION (Optional)
# ============================================================================
CLOUDFLARE_ZONE_ID=your_zone_id_here
CLOUDFLARE_API_TOKEN=your_cloudflare_api_token_here

# ============================================================================
# BACKUP CONFIGURATION
# ============================================================================
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=catalytic-saas-backups
BACKUP_S3_REGION=us-east-1

# ============================================================================
# FEATURE FLAGS
# ============================================================================
FEATURE_API_KEYS_ENABLED=true
FEATURE_WEBHOOKS_ENABLED=true
FEATURE_USAGE_ANALYTICS=true
FEATURE_MULTI_REGION=false

# ============================================================================
# PERFORMANCE SETTINGS
# ============================================================================
# Cache TTL (seconds)
CACHE_DEFAULT_TTL=3600
CACHE_TENANT_TTL=7200
CACHE_USER_TTL=1800

# Query Timeout (seconds)
DATABASE_QUERY_TIMEOUT=30
API_REQUEST_TIMEOUT=60

# ============================================================================
# SSL/TLS CONFIGURATION
# ============================================================================
# SSL Certificate Paths (if using custom certs)
# SSL_CERT_PATH=/etc/ssl/certs/catalytic.crt
# SSL_KEY_PATH=/etc/ssl/private/catalytic.key
# SSL_CA_PATH=/etc/ssl/certs/ca-bundle.crt

# Force HTTPS
FORCE_HTTPS=true
HSTS_MAX_AGE=31536000
HSTS_INCLUDE_SUBDOMAINS=true
HSTS_PRELOAD=true

# ============================================================================
# WEBHOOK CONFIGURATION
# ============================================================================
WEBHOOK_RETRY_ATTEMPTS=3
WEBHOOK_RETRY_DELAY_SECONDS=5
WEBHOOK_TIMEOUT_SECONDS=10

# ============================================================================
# COMPLIANCE & GDPR
# ============================================================================
GDPR_ENABLED=true
DATA_RETENTION_DAYS=365
AUDIT_LOG_ENABLED=true

# ============================================================================
# NOTES
# ============================================================================
# 1. Generate all secrets using cryptographically secure methods
# 2. Never reuse development keys in production
# 3. Rotate secrets quarterly
# 4. Keep backup of this file in secure vault (1Password, AWS Secrets Manager)
# 5. Use environment-specific DNS and certificates
# 6. Enable monitoring and alerting
# 7. Test disaster recovery procedures
# ============================================================================
